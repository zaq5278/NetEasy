angular.module("cftApp",["ionic","cftApp.httpFactory","cftApp.slideBox","cftApp.tabs","cftApp.news","cftApp.live","cftApp.topic","cftApp.personal"]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){o.views.transition("ios"),o.tabs.position("bottom"),o.navBar.alignTitle("center"),o.tabs.style("standard"),e.state("tabs",{url:"/tabs",abstract:!0,templateUrl:"tabs.html",controller:"tabsController"}),t.otherwise("tabs/news")}]),angular.module("cftApp.live",[]).config(["$stateProvider",function(e){e.state("tabs.live",{url:"/live",views:{"tabs-live":{templateUrl:"live.html",controller:"liveController"}}})}]).controller("liveController",["$scope",function(e){}]),angular.module("cftApp.news",[]).config(["$stateProvider",function(e){e.state("tabs.news",{url:"/news",views:{"tabs-news":{templateUrl:"news.html",controller:"newsController"}}})}]).controller("newsController",["$scope","$ionicPopup","$ionicSlideBoxDelegate","HttpFactory",function(e,t,o,n){e.news={newsArray:"",adsArray:[]};var l="http://c.3g.163.com/recommend/getSubDocPic?tid=T1348647909107&from=toutiao&offset=0&size=10";n.getData(l).then(function(t){e.news.newsArray=t,e.news.adsArray=t[0].ads}),e.showConfirm=function(){t.show({template:'<p style="text-align: center;padding: 20px;color: #555555">确定要删除该商品吗?</p>',scope:e,buttons:[{text:"取消",type:"button-clear button-dark"},{text:"<b>确定</b>",type:"button-clear button-assertive",onTap:function(e){console.log("点击了确定!")}}]})},e.dragOpenSlide=function(){o.$getByHandle("mainSlideBox").enableSlide(!0)},e.slideChanged=function(){o.$getByHandle("mainSlideBox").enableSlide(!1)}}]),angular.module("cftApp.personal",[]).config(["$stateProvider",function(e){e.state("tabs.personal",{url:"/personal",views:{"tabs-personal":{templateUrl:"personal.html",controller:"personalController"}}})}]).controller("personalController",["$scope",function(e){}]),angular.module("cftApp.tabs",[]).controller("tabsController",["$scope",function(e){e.$on("$stateChangeSuccess",function(e,t,o){var n=function(e){document.getElementsByTagName("body")[0];document.title=e;var t=document.createElement("iframe");t.setAttribute("src","../empty.png"),t.addEventListener("load",function(){setTimeout(function(){document.body.removeChild(t)})}),document.body.appendChild(t)};switch(t.url){case"/news":n("新闻");break;case"/live":n("直播");break;case"/topic":n("话题");break;case"/personal":n("我的")}})}]),angular.module("cftApp.topic",[]).config(["$stateProvider",function(e){e.state("tabs.topic",{url:"/topic",views:{"tabs-topic":{templateUrl:"topic.html",controller:"topicController"}}})}]).controller("topicController",["$scope",function(e){}]),angular.module("cftApp.httpFactory",[]).factory("HttpFactory",["$http","$q",function(e,t){return{getData:function(o,n){if(o){var l=t.defer();return o="http://192.168.0.204:3000/?myUrl="+encodeURIComponent(o),n=n?n:"GET",e({url:o,method:n,timeout:2e4}).then(function(e){e=e.data,e=e[Object.keys(e)[0]],l.resolve(e)},function(e){l.reject(e)}),l.promise}}}}]),angular.module("cftApp.slideBox",[]).directive("mgSlideBox",[function(){return{restrict:"E",scope:{sourceArray:"="},template:'<div class="topCarousel"><ion-slide-box delegate-handle="topCarouselSlideBox" on-slide-changed="slideHasChanged($index)" auto-play="true" slide-interval="1000" show-pager="true" does-continue="true" ng-if="isShowSlideBox" on-drag="drag($event)"> <ion-slide ng-repeat="ads in sourceArray track by $index" ng-click="goToDetailView($index)"><img ng-src="{{ads.imgsrc}}" class="topCarouselImg"></ion-slide> </ion-slide-box><div class="slideBottomDiv"></div></div>',controller:["$scope","$element","$ionicSlideBoxDelegate",function(e,t,o){e.goToDetailView=function(e){console.log("进入详情页"+e)};var n=t[0].lastElementChild;e.$watch("sourceArray",function(t,o){t&&t.length&&(e.isShowSlideBox=!0,n.innerText=e.sourceArray[0].title)}),e.slideHasChanged=function(e){},o.$getByHandle("mainSlideBox").enableSlide(!1),e.drag=function(e){o.$getByHandle("mainSlideBox").enableSlide(!1),e.stopPropagation()}}],replace:!0,link:function(e,t,o){}}}]);