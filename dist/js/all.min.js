angular.module("cftApp",["ionic","cftApp.urls","cftApp.httpFactory","cftApp.slideBox","cftApp.tabs","cftApp.news","cftApp.live","cftApp.topic","cftApp.personal","cftApp.news1","cftApp.news2"]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,n,t){t.views.transition("ios"),t.tabs.position("bottom"),t.navBar.alignTitle("center"),t.tabs.style("standard"),e.state("tabs",{url:"/tabs",abstract:!0,templateUrl:"tabs.html",controller:"tabsController"}),e.state("newsDetail",{url:"/newsDetail",templateUrl:"newsDetail.html"}),n.otherwise("tabs/news")}]),angular.module("cftApp.live",[]).config(["$stateProvider",function(e){e.state("tabs.live",{url:"/live",views:{"tabs-live":{templateUrl:"live.html",controller:"liveController"}}})}]).controller("liveController",["$scope","HttpFactory",function(e,n){e.live={slideSource:[]};var t="http://data.live.126.net/livechannel/previewlist.json";n.getData(t).then(function(n){var t=[];if(n.top.length){for(var o=0;o<n.top.length;o++){var s={title:n.top[o].roomName,imgsrc:n.top[o].image};t.push(s)}console.log(t),e.live.slideSource=t}})}]),angular.module("cftApp.news",[]).config(["$stateProvider",function(e){e.state("tabs.news",{url:"/news",views:{"tabs-news":{templateUrl:"news.html"}}})}]).controller("newsController",["$scope","$ionicPopup","$ionicSlideBoxDelegate","$state","$sce","HttpFactory","UrlArray",function(e,n,t,o,s,i,r){e.news={newsArray:[],adsArray:[],index:0,isFirst:!0},e.goToDetailView=function(){},e.$on("updateNews0",function(n,t){e.news.adsArray=[],e.news.newsArray=[],e.news.index=0,console.log("view0,"+t),"清理"!=t&&e.loadMore(r[t])}),e.loadMore=function(n){e.show();var t="";n?(t=n,t=t.replace("@",e.news.index)):t="http://c.m.163.com/recommend/getSubDocPic?from=toutiao&prog=LMA1&open=&openpath=&fn=1&passport=&devId=%2BnrKMbpU9ZDPUOhb9gvookO3HKJkIOzrIg%2BI9FhrLRStCu%2B7ZneFbZ30i61TL9kY&offset="+e.news.index+"&size=10&version=17.1&spever=false&net=wifi&lat=&lon=&ts=1480666192&sign=yseE2FNVWcJVjhvP48U1nPHyzZCKpBKh%2BaOhOE2d6GR48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=appstore",0===e.news.index?e.news.index+=11:e.news.index+=10,i.getData(t).then(function(n){if(n=n[Object.keys(n)[0]],e.hide(),!n)return void alert("没有更多数据!");var t=[];if(!e.news.adsArray.length&&n[0].ads&&n[0].ads.length){for(var o=0;o<n[0].ads.length;o++){var s={title:n[0].ads[o].title,imgsrc:n[0].ads[o].imgsrc};t.push(s)}e.news.adsArray=t}if(e.news.newsArray=e.news.newsArray.concat(n),0===e.news.index&&e.news.newsArray.splice(0,1),e.$broadcast("scroll.infiniteScrollComplete"),e.news.isFirst)for(var a=3;a<r.length;a++)i.getData(r[a])},function(){e.hide()})},e.doRefresh=function(e){}}]),angular.module("cftApp.news1",[]).controller("newsController1",["$scope","$ionicPopup","$ionicSlideBoxDelegate","$state","HttpFactory","UrlArray",function(e,n,t,o,s,i){e.news={newsArray1:[],adsArray1:[],index:0},e.$on("updateNews1",function(n,t){e.news.adsArray1=[],e.news.newsArray1=[],e.news.index=0,console.log("view1,"+t),"清理"!=t&&e.loadMore1(i[t])}),e.loadMore1=function(n){var t="";n?(t=n,t=t.replace("@",e.news.index)):t="http://c.m.163.com/dlist/article/dynamic?from=T1348648517839&offset="+e.news.index+"&size=10&fn=7&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639275&sign=ENAtFozNgGugOq3e1UL6hWbkeBqF24b8ECZ%2FOg2OGlZ48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D",0===e.news.index?e.news.index+=11:e.news.index+=10,s.getData(t).then(function(n){return(n=n[Object.keys(n)[0]])?(e.news.adsArray1.length||n[0].ads&&(e.news.adsArray1=n[0].ads),e.news.newsArray1=e.news.newsArray1.concat(n),0===e.news.index&&e.news.newsArray1.splice(0,1),void e.$broadcast("scroll.infiniteScrollComplete")):void alert("没有更多数据!")})}}]),angular.module("cftApp.news2",[]).controller("newsController2",["$scope","$ionicPopup","$ionicSlideBoxDelegate","$state","HttpFactory","UrlArray",function(e,n,t,o,s,i){e.news={newsArray2:[],adsArray2:[],index:0},e.$on("updateNews2",function(n,t){e.news.adsArray2=[],e.news.newsArray2=[],e.news.index=0,console.log("view2,"+t),"清理"!=t&&e.loadMore2(i[t])}),e.loadMore2=function(n){var t="";n?(t=n,t=t.replace("@",e.news.index)):t="http://c.m.163.com/recommend/getChanListNews?channel=T1456112189138&size=10&offset="+e.news.index+"&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640855&sign=n%2BRpzwR4DEI0MaavyBhQlpZaxlFxQdWjn0Ty7qOYWaB48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D",0===e.news.index?e.news.index+=11:e.news.index+=10,s.getData(t).then(function(n){return(n=n[Object.keys(n)[0]])?(e.news.adsArray2.length||n[0].ads&&(e.news.adsArray2=n[0].ads),e.news.newsArray2=e.news.newsArray2.concat(n),0===e.news.index&&e.news.newsArray2.splice(0,1),void e.$broadcast("scroll.infiniteScrollComplete")):void alert("没有更多数据!")})}}]),angular.module("cftApp.personal",[]).config(["$stateProvider",function(e){e.state("tabs.personal",{url:"/personal",views:{"tabs-personal":{templateUrl:"personal.html",controller:"personalController"}}})}]).controller("personalController",["$scope",function(e){}]),angular.module("cftApp.tabs",[]).controller("tabsController",["$scope","$ionicPopup","$ionicSlideBoxDelegate","$timeout","$ionicLoading",function(e,n,t,o,s){e.$on("$stateChangeSuccess",function(e,n,t){var o=function(e){document.getElementsByTagName("body")[0];document.title=e;var n=document.createElement("iframe");n.setAttribute("src","../empty.png"),n.addEventListener("load",function(){setTimeout(function(){document.body.removeChild(n)})}),document.body.appendChild(n)};switch(n.url){case"/news":o("新闻");break;case"/live":o("直播");break;case"/topic":o("话题");break;case"/personal":o("我的")}}),e.show=function(){s.show({template:'<ion-spinner icon="ios"></ion-spinner>'})},e.hide=function(){s.hide()},e.showConfirm=function(){n.show({template:'<p style="text-align: center;padding: 20px;color: #555555">确定要删除该商品吗?</p>',scope:e,buttons:[{text:"取消",type:"button-clear button-dark"},{text:"<b>确定</b>",type:"button-clear button-assertive",onTap:function(e){console.log("点击了确定!")}}]})},e.dragMainSlideOpenSlide=function(){t.$getByHandle("mainSlideBox").enableSlide(!0)},e.isDoesContinue=!1;var i=0,r="";e.onMainSlideDragRight=function(){r="后退"},e.onMainSlideDragLeft=function(){r="前进"},e.slideChanged=function(n){"前进"==r?i++:i-=1,i<=1||i>=15?(console.log("关闭循环轮播"),e.isDoesContinue=!1,t.$getByHandle("mainSlideBox").loop(!1)):(e.isDoesContinue=!0,t.$getByHandle("mainSlideBox").loop(!0)),e.$broadcast("updateNews"+n,i),t.$getByHandle("mainSlideBox").enableSlide(!1),t.$getByHandle("mainSlideBox").update()}}]),angular.module("cftApp.topic",[]).config(["$stateProvider",function(e){e.state("tabs.topic",{url:"/topic",views:{"tabs-topic":{templateUrl:"topic.html",controller:"topicController"}}})}]).controller("topicController",["$scope",function(e){}]),angular.module("cftApp.httpFactory",[]).factory("HttpFactory",["$http","$q",function(e,n){return{getData:function(t,o){if(t){var s=n.defer();return t="http://59.110.139.104:3000/wy?myUrl="+encodeURIComponent(t),o=o?o:"GET",e({url:t,method:o,cache:!0,timeout:2e4}).then(function(e){e=e.data,s.resolve(e)},function(e){s.reject(e)}),s.promise}}}}]),angular.module("cftApp.slideBox",[]).directive("mgSlideBox",[function(){return{restrict:"E",scope:{sourceArray:"="},template:'<div class="topCarousel"><ion-slide-box delegate-handle="topCarouselSlideBox" on-slide-changed="slideHasChanged($index)" auto-play="false" slide-interval="1000" show-pager="true" does-continue="true" ng-if="isShowSlideBox" on-drag="drag($event)"><ion-slide ng-repeat="ads in sourceArray track by $index" ng-click="goToDetailView($index)"><img ng-src="{{ads.imgsrc}}" class="topCarouselImg"></ion-slide></ion-slide-box><div class="slideBottomDiv" ng-show="isShowSlideBox"></div></div>',controller:["$scope","$element","$ionicSlideBoxDelegate",function(e,n,t){e.goToDetailView=function(e){console.log("进入详情页"+e)};var o=n[0].lastElementChild;e.$watch("sourceArray",function(n,t){n&&n.length&&(e.isShowSlideBox=!1,setTimeout(function(){e.isShowSlideBox=!0}),o.innerText=e.sourceArray[0].title)}),e.slideHasChanged=function(n){o.innerText=e.sourceArray[n].title},t.$getByHandle("mainSlideBox").enableSlide(!1),e.drag=function(e){t.$getByHandle("mainSlideBox").enableSlide(!1),e.stopPropagation()}}],replace:!0,link:function(e,n,t){}}}]),angular.module("cftApp.urls",[]).constant("UrlArray",["http://c.m.163.com/recommend/getSubDocPic?from=toutiao&prog=LMA1&open=&openpath=&fn=1&passport=&devId=%2BnrKMbpU9ZDPUOhb9gvookO3HKJkIOzrIg%2BI9FhrLRStCu%2B7ZneFbZ30i61TL9kY&offset=@&size=10&version=17.1&spever=false&net=wifi&lat=&lon=&ts=1480666192&sign=yseE2FNVWcJVjhvP48U1nPHyzZCKpBKh%2BaOhOE2d6GR48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=appstore","http://c.m.163.com/dlist/article/dynamic?from=T1348648517839&offset=@&size=10&fn=7&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639275&sign=ENAtFozNgGugOq3e1UL6hWbkeBqF24b8ECZ%2FOg2OGlZ48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getChanListNews?channel=T1456112189138&size=10&offset=@&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640855&sign=n%2BRpzwR4DEI0MaavyBhQlpZaxlFxQdWjn0Ty7qOYWaB48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348649079062&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639446&sign=cZqFpGcYxIM23Mk0zlBq8ziD1sRlb1GqZlwcRLb38aZ48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getSubDocPic?from=netease_h&size=10&offset=@&fn=4&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639599&sign=JIfO0JDD%2Bn9%2BAUDPwiCVNSwML5QPD%2BO1KSZcsmDfw2948ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/local/dynamic?from=6YOR5bee&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639679&sign=fibH0nYFS5ZqfhTkz%2Fctkn1b%2B%2B7UaCWuMhwPOm2XAxN48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getChanListNews?channel=T1457068979049&size=10&offset=@&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639724&sign=uklrBnfDnFoSS86%2B44xw0tzktOhz8ek4D2b6Uh0bXk148ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348648756099&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639780&sign=PqlXEtC2KZaOX7vOO17uHuo4duhmWIxQqoQ4rBKRsQh48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348649580692&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639824&sign=BENvYqDl9cYKiJh2irUV5%2Biue8PV%2FKHdFs3tQWGzBqd48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348650593803&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639994&sign=L2rYDnEjMRXqgyoBwjDOU9%2FuAlHKEvkGbCcbOw0egKp48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getChanListNews?channel=T1419316284722&size=10&offset=@&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640349&sign=kuB1wmMK3BIofo29zp1u%2FCelBxwQVclBPY2jLDS6PfV48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1473054348939&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640251&sign=TxI1npNtFDs5QSgpQr%2FOTwXPVB%2FvuqHD5Vj7E5Ul5t948ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348648141035&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640432&sign=LeTem6ZlcSys0TMWqSD%2FkavFP%2BW7CKnHNX3zs%2B6m3l548ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348654151579&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640614&sign=Ey6%2F0Qyd7pxjaaWUoZLQYriGwqX0xzmATqe6CpZ0C2x48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1414389941036&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640649&sign=DXY4efOR3JOAgU6ePvFftxYD41PHsjGxZdWGM5quV0x48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348649145984&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480641094&sign=m32ovzEGXTpUeq0kQ%2BXNMNXg9B6bGu2D0vfF3xrFwjF48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D"]);